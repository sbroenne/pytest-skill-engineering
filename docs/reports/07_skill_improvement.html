<!doctype html><html lang="en" class="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>pytest-aitest - Test Report</title><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700&amp;family=Roboto+Mono&amp;display=swap" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script><style>/* ============================================================
   pytest-aitest Report Styles
   Hand-written CSS ‚Äî replaces Tailwind CSS build pipeline
   Matches mkdocs-material slate/indigo theme
   ============================================================ */

/* ==================== Design Tokens ==================== */
:root {
  /* Primary (Material Indigo) */
  --color-primary: #4051b5;
  --color-primary-50: #e8eaf6;
  --color-primary-100: #c5cae9;
  --color-primary-200: #9fa8da;
  --color-primary-300: #7986cb;
  --color-primary-400: #5c6bc0;
  --color-primary-500: #4051b5;
  --color-primary-600: #3949ab;
  --color-primary-700: #303f9f;
  --color-primary-800: #283593;
  --color-primary-900: #1a237e;

  /* Surfaces (Slate dark) */
  --color-surface: #1e2129;
  --color-surface-card: #282c34;
  --color-surface-elevated: #2d323c;
  --color-surface-code: #1c1f26;

  /* Text */
  --color-text: #bfc7d5;
  --color-text-muted: #8b949e;
  --color-text-light: #c9d1d9;

  /* Accent */
  --color-accent: #526cfe;
  --color-accent-hover: #6b7eff;

  /* Semantic colors */
  --color-green: #4ade80;
  --color-yellow: #facc15;
  --color-red: #f87171;
  --color-blue: #60a5fa;

  /* Shadows (Material Design) */
  --shadow-material: 0 2px 4px -1px rgba(0,0,0,.2), 0 4px 5px 0 rgba(0,0,0,.14), 0 1px 10px 0 rgba(0,0,0,.12);
  --shadow-material-lg: 0 5px 5px -3px rgba(0,0,0,.2), 0 8px 10px 1px rgba(0,0,0,.14), 0 3px 14px 2px rgba(0,0,0,.12);

  /* Border radius */
  --radius-material: 4px;

  /* Fonts */
  --font-sans: 'Roboto', system-ui, sans-serif;
  --font-mono: 'Roboto Mono', monospace;
}

/* ==================== Preflight Reset ==================== */
/* Matches Tailwind CSS v3.4 preflight ‚Äî do NOT remove or simplify */

*, *::before, *::after {
  box-sizing: border-box;
  border-width: 0;
  border-style: solid;
  border-color: rgba(255, 255, 255, 0.1);
}

::before, ::after {
  --tw-content: '';
}

html {
  line-height: 1.5;
  -webkit-text-size-adjust: 100%;
  -moz-tab-size: 4;
  tab-size: 4;
  font-family: var(--font-sans);
  font-feature-settings: normal;
  font-variation-settings: normal;
  -webkit-tap-highlight-color: transparent;
}

body {
  margin: 0;
  line-height: inherit;
}

hr {
  height: 0;
  color: inherit;
  border-top-width: 1px;
}

h1, h2, h3, h4, h5, h6 {
  font-size: inherit;
  font-weight: inherit;
}

a {
  color: inherit;
  text-decoration: inherit;
}

b, strong {
  font-weight: bolder;
}

code, kbd, samp, pre {
  font-family: var(--font-mono);
  font-feature-settings: normal;
  font-variation-settings: normal;
  font-size: 1em;
}

small {
  font-size: 80%;
}

sub, sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
sub { bottom: -0.25em; }
sup { top: -0.5em; }

table {
  text-indent: 0;
  border-color: inherit;
  border-collapse: collapse;
}

button, input, optgroup, select, textarea {
  font-family: inherit;
  font-feature-settings: inherit;
  font-variation-settings: inherit;
  font-size: 100%;
  font-weight: inherit;
  line-height: inherit;
  letter-spacing: inherit;
  color: inherit;
  margin: 0;
  padding: 0;
}

button, select {
  text-transform: none;
}

button,
input[type="button"],
input[type="reset"],
input[type="submit"] {
  -webkit-appearance: button;
  background-color: transparent;
  background-image: none;
}

:-moz-focusring {
  outline: auto;
}

:-moz-ui-invalid {
  box-shadow: none;
}

progress {
  vertical-align: baseline;
}

::-webkit-inner-spin-button,
::-webkit-outer-spin-button {
  height: auto;
}

[type="search"] {
  -webkit-appearance: textfield;
  outline-offset: -2px;
}

::-webkit-search-decoration {
  -webkit-appearance: none;
}

::-webkit-file-upload-button {
  -webkit-appearance: button;
  font: inherit;
}

summary {
  display: list-item;
}

blockquote, dd, dl, figure, h1, h2, h3, h4, h5, h6, hr, p, pre {
  margin: 0;
}

fieldset {
  margin: 0;
  padding: 0;
}

legend {
  padding: 0;
}

ol, ul, menu {
  list-style: none;
  margin: 0;
  padding: 0;
}

dialog {
  padding: 0;
}

textarea {
  resize: vertical;
}

input::placeholder,
textarea::placeholder {
  opacity: 1;
  color: var(--color-text-muted);
}

button, [role="button"] {
  cursor: pointer;
}

:disabled {
  cursor: default;
}

img, svg, video, canvas, audio, iframe, embed, object {
  display: block;
  vertical-align: middle;
}

img, video {
  max-width: 100%;
  height: auto;
}

[hidden]:where(:not([hidden="until-found"])) {
  display: none;
}

/* ==================== Base Styles ==================== */
body {
  background-color: var(--color-surface);
  color: var(--color-text);
  font-family: var(--font-sans);
  line-height: 1.625;
  min-height: 100vh;
}

h1, h2, h3, h4, h5, h6 {
  color: var(--color-text-light);
  font-weight: 500;
  letter-spacing: -0.025em;
}

a {
  color: var(--color-primary);
  transition: color 150ms;
}
a:hover {
  color: var(--color-accent);
}

/* ==================== Layout Utilities ==================== */
.flex { display: flex; }
.grid { display: grid; }
.hidden { display: none; }
.inline-flex { display: inline-flex; }
.fixed { position: fixed; }
.absolute { position: absolute; }
.inset-0 { inset: 0; }

.flex-1 { flex: 1 1 0%; }
.flex-col { flex-direction: column; }
.flex-wrap { flex-wrap: wrap; }
.items-center { align-items: center; }
.items-start { align-items: flex-start; }
.justify-between { justify-content: space-between; }
.justify-center { justify-content: center; }
.min-w-0 { min-width: 0; }

.gap-1 { gap: 0.25rem; }
.gap-2 { gap: 0.5rem; }
.gap-3 { gap: 0.75rem; }
.gap-4 { gap: 1rem; }
.gap-x-6 { column-gap: 1.5rem; }
.gap-y-1 { row-gap: 0.25rem; }

.grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }

/* ==================== Spacing Utilities ==================== */
.p-2 { padding: 0.5rem; }
.p-3 { padding: 0.75rem; }
.p-4 { padding: 1rem; }
.p-5 { padding: 1.25rem; }
.p-6 { padding: 1.5rem; }
.p-8 { padding: 2rem; }
.px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
.px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
.px-5 { padding-left: 1.25rem; padding-right: 1.25rem; }
.px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
.py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
.py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
.py-4 { padding-top: 1rem; padding-bottom: 1rem; }
.py-8 { padding-top: 2rem; padding-bottom: 2rem; }
.pl-4 { padding-left: 1rem; }
.pl-5 { padding-left: 1.25rem; }
.pl-8 { padding-left: 2rem; }

.mb-1 { margin-bottom: 0.25rem; }
.mb-3 { margin-bottom: 0.75rem; }
.mb-4 { margin-bottom: 1rem; }
.mb-5 { margin-bottom: 1.25rem; }
.mb-6 { margin-bottom: 1.5rem; }
.mb-8 { margin-bottom: 2rem; }
.ml-2 { margin-left: 0.5rem; }
.ml-auto { margin-left: auto; }
.mt-2 { margin-top: 0.5rem; }
.mt-6 { margin-top: 1.5rem; }
.mt-8 { margin-top: 2rem; }
.mx-auto { margin-left: auto; margin-right: auto; }
.pb-2 { padding-bottom: 0.5rem; }

.space-y-1 > * + * { margin-top: 0.25rem; }
.space-y-2 > * + * { margin-top: 0.5rem; }
.space-y-4 > * + * { margin-top: 1rem; }

/* ==================== Sizing ==================== */
.w-10 { width: 2.5rem; }
.h-10 { height: 2.5rem; }
.w-full { width: 100%; }
.h-full { height: 100%; }
.min-h-screen { min-height: 100vh; }
.max-w-none { max-width: none; }
.max-w-xl { max-width: 36rem; }
.max-w-6xl { max-width: 72rem; }
.w-\[90vw\] { width: 90vw; }
.h-\[85vh\] { height: 85vh; }

/* ==================== Typography ==================== */
.text-xs { font-size: 0.75rem; line-height: 1rem; }
.text-sm { font-size: 0.875rem; line-height: 1.25rem; }
.text-base { font-size: 1rem; line-height: 1.5rem; }
.text-lg { font-size: 1.125rem; line-height: 1.75rem; }
.text-xl { font-size: 1.25rem; line-height: 1.75rem; }
.text-2xl { font-size: 1.5rem; line-height: 2rem; }

.font-medium { font-weight: 500; }
.font-semibold { font-weight: 600; }
.font-mono { font-family: var(--font-mono); }
.tabular-nums { font-variant-numeric: tabular-nums; }
.uppercase { text-transform: uppercase; }
.italic { font-style: italic; }
.tracking-tight { letter-spacing: -0.025em; }
.tracking-wider { letter-spacing: 0.05em; }
.leading-relaxed { line-height: 1.625; }
.truncate { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.line-through { text-decoration: line-through; }
.underline { text-decoration: underline; }
.text-left { text-align: left; }
.text-center { text-align: center; }
.text-right { text-align: right; }
.list-disc { list-style-type: disc; }

/* ==================== Text Colors ==================== */
.text-white { color: #fff; }
.text-text { color: var(--color-text); }
.text-text-light { color: var(--color-text-light); }
.text-text-muted { color: var(--color-text-muted); }
.text-primary { color: var(--color-primary); }
.text-primary-300 { color: var(--color-primary-300); }
.text-accent { color: var(--color-accent); }
.text-green-400 { color: var(--color-green); }
.text-yellow-400 { color: var(--color-yellow); }
.text-red-400 { color: var(--color-red); }
.text-blue-400 { color: var(--color-blue); }

/* ==================== Background Colors ==================== */
.bg-surface { background-color: var(--color-surface); }
.bg-surface-card { background-color: var(--color-surface-card); }
.bg-surface-elevated { background-color: var(--color-surface-elevated); }
.bg-surface-code { background-color: var(--color-surface-code); }
.bg-primary { background-color: var(--color-primary); }
.bg-primary\/10 { background-color: rgba(64, 81, 181, 0.1); }
.bg-primary\/15 { background-color: rgba(64, 81, 181, 0.15); }
.bg-primary\/20 { background-color: rgba(64, 81, 181, 0.2); }
.bg-green-500\/5 { background-color: rgba(34, 197, 94, 0.05); }
.bg-green-500\/10 { background-color: rgba(34, 197, 94, 0.1); }
.bg-green-500\/15 { background-color: rgba(34, 197, 94, 0.15); }
.bg-red-500\/5 { background-color: rgba(239, 68, 68, 0.05); }
.bg-red-500\/10 { background-color: rgba(239, 68, 68, 0.1); }
.bg-red-500\/15 { background-color: rgba(239, 68, 68, 0.15); }
.bg-yellow-500\/5 { background-color: rgba(234, 179, 8, 0.05); }
.bg-white\/5 { background-color: rgba(255, 255, 255, 0.05); }
.bg-white\/10 { background-color: rgba(255, 255, 255, 0.1); }
.bg-black\/80 { background-color: rgba(0, 0, 0, 0.8); }
.bg-transparent { background-color: transparent; }

/* ==================== Borders ==================== */
.border { border-width: 1px; }
.border-0 { border-width: 0; }
.border-t { border-top-width: 1px; }
.border-b { border-bottom-width: 1px; }
.border-l-4 { border-left-width: 4px; }
.border-l-\[3px\] { border-left-width: 3px; }

.border-white\/5 { border-color: rgba(255, 255, 255, 0.05); }
.border-white\/10 { border-color: rgba(255, 255, 255, 0.1); }
.border-white\/20 { border-color: rgba(255, 255, 255, 0.2); }
.border-primary { border-color: var(--color-primary); }
.border-primary\/30 { border-color: rgba(64, 81, 181, 0.3); }
.border-primary\/50 { border-color: rgba(64, 81, 181, 0.5); }
.border-green-500 { border-color: #22c55e; }
.border-green-500\/30 { border-color: rgba(34, 197, 94, 0.3); }
.border-red-500 { border-color: #ef4444; }
.border-red-500\/30 { border-color: rgba(239, 68, 68, 0.3); }
.border-yellow-500\/30 { border-color: rgba(234, 179, 8, 0.3); }

.rounded { border-radius: 0.25rem; }
.rounded-full { border-radius: 9999px; }
.rounded-lg { border-radius: 0.5rem; }
.rounded-material { border-radius: var(--radius-material); }

/* ==================== Effects ==================== */
.shadow-material { box-shadow: var(--shadow-material); }
.shadow-material-lg { box-shadow: var(--shadow-material-lg); }
.opacity-50 { opacity: 0.5; }
.opacity-70 { opacity: 0.7; }
.backdrop-blur-sm { backdrop-filter: blur(4px); }

.transition-colors { transition-property: color, background-color, border-color; transition-duration: 150ms; transition-timing-function: ease; }
.transition-all { transition-property: all; transition-duration: 150ms; transition-timing-function: ease; }
.transition-transform { transition-property: transform; transition-timing-function: ease; }
.duration-150 { transition-duration: 150ms; }
.duration-200 { transition-duration: 200ms; }
.ease-out { transition-timing-function: ease-out; }

/* ==================== Positioning ==================== */
.top-4 { top: 1rem; }
.right-4 { right: 1rem; }
.z-40 { z-index: 40; }
.z-50 { z-index: 50; }

/* ==================== Overflow & Cursor ==================== */
.overflow-hidden { overflow: hidden; }
.overflow-auto { overflow: auto; }
.overflow-x-auto { overflow-x: auto; }
.overflow-y-auto { overflow-y: auto; }
.cursor-pointer { cursor: pointer; }

/* ==================== Misc Utilities ==================== */
.sr-only {
  position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border-width: 0;
}

/* ==================== Hover States ==================== */
.hover\:bg-white\/\[0\.02\]:hover { background-color: rgba(255, 255, 255, 0.02); }
.hover\:bg-white\/\[0\.03\]:hover { background-color: rgba(255, 255, 255, 0.03); }
.hover\:border-white\/20:hover { border-color: rgba(255, 255, 255, 0.2); }
.hover\:border-primary\/30:hover { border-color: rgba(64, 81, 181, 0.3); }
.hover\:border-primary\/50:hover { border-color: rgba(64, 81, 181, 0.5); }
.hover\:text-text-light:hover { color: var(--color-text-light); }
.hover\:text-blue-400:hover { color: var(--color-blue); }
.hover\:text-accent:hover { color: var(--color-accent); }
.hover\:decoration-accent\/50:hover { text-decoration-color: rgba(82, 108, 254, 0.5); }
.decoration-primary\/30 { text-decoration-color: rgba(64, 81, 181, 0.3); }

/* ==================== Gradient ==================== */
.bg-gradient-to-r { background-image: linear-gradient(to right, var(--tw-gradient-stops)); }
.from-purple-500\/10 { --tw-gradient-from: rgba(168, 85, 247, 0.1); --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, transparent); }
.via-primary\/10 { --tw-gradient-stops: var(--tw-gradient-from), rgba(64, 81, 181, 0.1), var(--tw-gradient-to, transparent); }
.to-transparent { --tw-gradient-to: transparent; }

/* ============================================================
   Component Classes
   ============================================================ */

/* ==================== Report Header ==================== */
.report-header {
  background-color: var(--color-primary);
  color: #fff;
  border-radius: var(--radius-material);
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  box-shadow: var(--shadow-material);
}
.report-header h1 {
  font-size: 1.5rem;
  line-height: 2rem;
  font-weight: 500;
  margin-bottom: 0.25rem;
  letter-spacing: -0.025em;
}

/* ==================== Status Badges ==================== */
.status-passed {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  background-color: rgba(34, 197, 94, 0.15);
  color: var(--color-green);
  font-weight: 500;
  font-size: 0.875rem;
  line-height: 1.25rem;
  border: 1px solid rgba(34, 197, 94, 0.3);
}
.status-failed {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  background-color: rgba(239, 68, 68, 0.15);
  color: var(--color-red);
  font-weight: 500;
  font-size: 0.875rem;
  line-height: 1.25rem;
  border: 1px solid rgba(239, 68, 68, 0.3);
}

/* ==================== Cards ==================== */
.card {
  background-color: var(--color-surface-card);
  border-radius: var(--radius-material);
  box-shadow: var(--shadow-material);
  border: 1px solid rgba(255, 255, 255, 0.05);
}
.card-header {
  padding: 1.25rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  font-weight: 500;
  color: var(--color-text-light);
}
.card-body {
  padding: 1.25rem;
}

/* ==================== Section Title ==================== */
.section-title {
  font-size: 1.125rem;
  line-height: 1.75rem;
  font-weight: 500;
  margin-bottom: 1.25rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: var(--color-text-light);
}

/* ==================== Tool Name ==================== */
.tool-name {
  font-family: var(--font-mono);
  color: var(--color-accent);
  font-weight: 500;
}

/* ==================== AI Insights ==================== */
.ai-insights {
  background-color: var(--color-surface-card);
  border-radius: var(--radius-material);
  box-shadow: var(--shadow-material);
  border: 1px solid rgba(255, 255, 255, 0.05);
  margin-bottom: 2.5rem;
  overflow: hidden;
}
.ai-insights-header {
  padding: 1.25rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  font-weight: 500;
  background-image: linear-gradient(to right, rgba(168, 85, 247, 0.1), rgba(64, 81, 181, 0.1), transparent);
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: var(--color-text-light);
}

/* ==================== Leaderboard Table ==================== */
.leaderboard-table {
  width: 100%;
  font-size: 0.875rem;
  line-height: 1.25rem;
  border-collapse: collapse;
}
.leaderboard-table th {
  padding: 0.75rem 1.25rem;
  text-align: left;
  font-weight: 500;
  color: var(--color-text-muted);
  text-transform: uppercase;
  font-size: 0.75rem;
  line-height: 1rem;
  letter-spacing: 0.05em;
  background-color: var(--color-surface-elevated);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}
.leaderboard-table td {
  padding: 1rem 1.25rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  color: var(--color-text);
}
.leaderboard-table tbody tr {
  transition: background-color 150ms;
}
.leaderboard-table tbody tr:hover {
  background-color: rgba(255, 255, 255, 0.02);
}
.winner-row {
  background-color: rgba(34, 197, 94, 0.05);
}

/* ==================== Markdown Content ==================== */
.markdown-content {
  max-width: none;
  font-size: 0.875rem;
  line-height: 1.7;
  color: var(--color-text);
}
.markdown-content h2 {
  font-size: 1.125rem;
  line-height: 1.75rem;
  font-weight: 500;
  color: var(--color-text-light);
  margin-top: 2rem;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}
.markdown-content h3 {
  font-size: 1rem;
  line-height: 1.5rem;
  font-weight: 500;
  color: var(--color-text-light);
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
}
.markdown-content p {
  color: var(--color-text);
  line-height: 1.625;
  margin-bottom: 1rem;
}
.markdown-content ul {
  list-style-type: disc;
  padding-left: 1.25rem;
  color: var(--color-text);
  margin-bottom: 1rem;
}
.markdown-content ul > li + li { margin-top: 0.375rem; }
.markdown-content li {
  color: var(--color-text);
}
.markdown-content li::marker {
  color: var(--color-text-muted);
}
.markdown-content code {
  background-color: var(--color-surface-code);
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
  color: var(--color-accent);
  font-family: var(--font-mono);
  font-size: 0.85em;
  border: 1px solid rgba(255, 255, 255, 0.05);
}
.markdown-content pre {
  background-color: var(--color-surface-code);
  border-radius: var(--radius-material);
  padding: 1rem;
  overflow-x: auto;
  border: 1px solid rgba(255, 255, 255, 0.05);
  margin-bottom: 1rem;
}
.markdown-content pre code {
  background-color: transparent;
  padding: 0;
  border: 0;
  color: var(--color-text);
  font-size: inherit;
}
.markdown-content strong {
  color: var(--color-text-light);
  font-weight: 600;
}
.markdown-content a {
  color: var(--color-primary);
  text-decoration: underline;
  text-decoration-color: rgba(64, 81, 181, 0.3);
  transition: color 150ms, text-decoration-color 150ms;
}
.markdown-content a:hover {
  color: var(--color-accent);
  text-decoration-color: rgba(82, 108, 254, 0.5);
}
.markdown-content blockquote {
  border-left: 4px solid rgba(64, 81, 181, 0.5);
  padding-left: 1rem;
  font-style: italic;
  color: var(--color-text-muted);
}
.markdown-content table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 1rem;
}
.markdown-content th,
.markdown-content td {
  padding: 0.5rem 0.75rem;
  border: 1px solid rgba(255, 255, 255, 0.1);
  text-align: left;
}
.markdown-content th {
  background-color: var(--color-surface-elevated);
  font-weight: 500;
  color: var(--color-text-light);
}

/* ==================== AI Summary Visualizations ==================== */

/* --- Winner Spotlight Card --- */
.winner-card {
  position: relative;
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.12) 0%, rgba(64, 81, 181, 0.10) 50%, rgba(82, 108, 254, 0.08) 100%);
  border: 1px solid rgba(34, 197, 94, 0.35);
  border-radius: 10px;
  padding: 16px 20px;
  margin-bottom: 1rem;
  overflow: hidden;
}
.winner-card::before {
  content: '';
  position: absolute;
  top: -60%;
  right: -20%;
  width: 200px;
  height: 200px;
  background: radial-gradient(circle, rgba(34, 197, 94, 0.10) 0%, transparent 70%);
  pointer-events: none;
}
.winner-card::after {
  content: 'üèÜ';
  position: absolute;
  top: 14px;
  right: 18px;
  font-size: 1.4rem;
  opacity: 0.7;
}
.winner-title {
  font-size: 0.6rem;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--color-green);
  margin-bottom: 2px;
  font-weight: 600;
}
.winner-name {
  font-size: 1.25rem;
  font-weight: 700;
  color: #fff;
  margin-bottom: 4px;
  letter-spacing: -0.02em;
}
.winner-summary {
  font-size: 0.8rem;
  color: var(--color-text);
  line-height: 1.4;
  max-width: 88%;
}
.winner-stats {
  display: flex;
  gap: 20px;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid rgba(255, 255, 255, 0.08);
}
.winner-stat {
  display: flex;
  flex-direction: column;
}
.winner-stat-value {
  font-size: 1.1rem;
  font-weight: 700;
  font-variant-numeric: tabular-nums;
}
.winner-stat-value.green { color: var(--color-green); }
.winner-stat-value.blue { color: var(--color-blue); }
.winner-stat-value.amber { color: var(--color-yellow); }
.winner-stat-label {
  font-size: 0.6rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--color-text-muted);
  margin-top: 1px;
}

/* --- Metric Cards (compact dashboard) --- */
.metric-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 8px;
  margin-bottom: 1rem;
}
.metric-card {
  background-color: var(--color-surface-elevated);
  border-radius: 6px;
  padding: 12px 10px;
  text-align: center;
  border: 1px solid rgba(255, 255, 255, 0.05);
  position: relative;
  overflow: hidden;
}
.metric-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
}
.metric-card.green { border-color: rgba(34, 197, 94, 0.25); }
.metric-card.green::before { background: linear-gradient(90deg, var(--color-green), rgba(34, 197, 94, 0.3)); }
.metric-card.blue { border-color: rgba(96, 165, 250, 0.25); }
.metric-card.blue::before { background: linear-gradient(90deg, var(--color-blue), rgba(96, 165, 250, 0.3)); }
.metric-card.red { border-color: rgba(248, 113, 113, 0.25); }
.metric-card.red::before { background: linear-gradient(90deg, var(--color-red), rgba(248, 113, 113, 0.3)); }
.metric-card.amber { border-color: rgba(250, 204, 21, 0.25); }
.metric-card.amber::before { background: linear-gradient(90deg, var(--color-yellow), rgba(250, 204, 21, 0.3)); }
.metric-value {
  font-size: 1.4rem;
  font-weight: 700;
  line-height: 1.2;
  margin-bottom: 2px;
}
.metric-value.green { color: var(--color-green); }
.metric-value.blue  { color: var(--color-blue); }
.metric-value.red   { color: var(--color-red); }
.metric-value.amber { color: var(--color-yellow); }
.metric-label {
  font-size: 0.6rem;
  color: var(--color-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.06em;
}

/* --- Pass Rate Bars (compact) --- */
.progress-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 5px 0;
}
.progress-agent {
  width: 100px;
  font-size: 0.75rem;
  color: var(--color-text-light);
  text-align: right;
  flex-shrink: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.progress-track {
  flex: 1;
  background-color: rgba(255, 255, 255, 0.04);
  border-radius: 4px;
  height: 18px;
  overflow: hidden;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);
}
.progress-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 600ms cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}
.progress-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 50%;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.15) 0%, transparent 100%);
  border-radius: 4px 4px 0 0;
}
.progress-fill.green { background: linear-gradient(90deg, #22c55e, #4ade80); }
.progress-fill.blue  { background: linear-gradient(90deg, #3b82f6, #60a5fa); }
.progress-fill.amber { background: linear-gradient(90deg, #d97706, #facc15); }
.progress-fill.red   { background: linear-gradient(90deg, #dc2626, #f87171); }
.progress-pct {
  width: 42px;
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--color-text-light);
  text-align: right;
  flex-shrink: 0;
  font-variant-numeric: tabular-nums;
}

/* Constrain Mermaid chart size inside AI insights */
.markdown-content pre.mermaid {
  background-color: transparent;
  border: none;
  padding: 0;
  max-width: 500px;
  margin-bottom: 0.75rem;
}

/* ==================== Agent Selector ==================== */
.agent-chip {
  cursor: pointer;
  padding: 0.5rem 0.75rem;
  border-radius: var(--radius-material);
  border: 1px solid rgba(255, 255, 255, 0.1);
  background-color: var(--color-surface-card);
  transition: all 150ms;
}
.agent-chip:hover {
  border-color: rgba(64, 81, 181, 0.5);
}
.agent-chip.selected {
  border-color: var(--color-primary);
  background-color: rgba(64, 81, 181, 0.1);
}

/* ==================== Filter Buttons ==================== */
.filter-btn {
  padding: 0.375rem 0.75rem;
  border-radius: 0.25rem;
  font-size: 0.875rem;
  line-height: 1.25rem;
  color: var(--color-text-muted);
  border: 1px solid rgba(255, 255, 255, 0.1);
  background-color: var(--color-surface-card);
  cursor: pointer;
  transition: color 150ms, background-color 150ms, border-color 150ms;
}
.filter-btn:hover {
  border-color: rgba(255, 255, 255, 0.2);
}
.filter-btn.active {
  border-color: var(--color-primary);
  background-color: rgba(64, 81, 181, 0.2);
  color: var(--color-text-light);
}

/* ==================== Group / Expand ==================== */
.test-group.collapsed .group-content { display: none; }
.test-group.collapsed .expand-icon { transform: rotate(-90deg); }
.test-row.hidden { display: none; }
.test-detail.hidden { display: none; }

/* ==================== Overlay ==================== */
#overlay.active { display: flex !important; }
#diagram-hover-popup.active { display: block !important; }
#overlay-mermaid svg {
  max-width: 100%;
  max-height: 100%;
  width: auto;
  height: auto;
  min-height: 60vh;
}
</style></head><body class="bg-surface text-text min-h-screen"><div class="max-w-6xl mx-auto px-6 py-8"><header class="report-header mb-8"><div class="flex justify-between items-start gap-4 mb-4"><div class="flex-1"><h1 class="text-2xl font-medium mb-1">Skill improvement ‚Äî baseline vs skilled agent.</h1></div><div class="status-failed"><span>‚úó</span><span>1 Failed</span></div></div><div class="flex flex-wrap gap-x-6 gap-y-1 py-3 border-t border-white/10 text-sm"><span class="opacity-70">February 07, 2026 at 07:39 PM</span><span>üìÑ <span class="text-text-light hover:text-blue-400 cursor-pointer" title="tests/fixtures/scenario_07_skill_improvement.py">scenario_07_skill_improvement.py</span></span><span class="tabular-nums">4 tests</span><span class="tabular-nums">72.1s</span><span class="tabular-nums" title="Token range (min-max per test)">1,286‚Äì2,169 tok</span><span class="tabular-nums" title="Test execution cost">üß™ $-0.011550</span><span class="tabular-nums" title="AI analysis cost">ü§ñ $0.0218</span><span class="tabular-nums font-semibold" title="Total cost">üí∞ $0.0102</span></div></header><section class="mb-8"><div class="ai-insights"><div class="ai-insights-header"><span>ü§ñ</span><span>AI Analysis</span><button class="ml-auto text-text-muted hover:text-text-light text-sm" onclick="this.closest(&#39;.ai-insights&#39;).querySelector(&#39;.card-body&#39;).classList.toggle(&#39;hidden&#39;)">Toggle</button></div><div class="card-body"><div class="markdown-content"><div class="winner-card">
<div class="winner-title">Recommended for Deploy</div>
<div class="winner-name">baseline</div>
<div class="winner-summary">Delivers a perfect pass rate at lower cost while reliably calling account tools when needed. Avoids permission-seeking behavior that caused missed tool usage in the skilled variant.</div>
<div class="winner-stats">
<div class="winner-stat"><span class="winner-stat-value green">100%</span><span class="winner-stat-label">Pass Rate</span></div>
<div class="winner-stat"><span class="winner-stat-value blue">$0.004625</span><span class="winner-stat-label">Total Cost</span></div>
<div class="winner-stat"><span class="winner-stat-value amber">3,455</span><span class="winner-stat-label">Tokens</span></div>
</div>
</div>

<div class="metric-grid">
<div class="metric-card green">
<div class="metric-value green">4</div>
<div class="metric-label">Total Tests</div>
</div>
<div class="metric-card red">
<div class="metric-value red">1</div>
<div class="metric-label">Failures</div>
</div>
<div class="metric-card blue">
<div class="metric-value blue">2</div>
<div class="metric-label">Agents</div>
</div>
<div class="metric-card amber">
<div class="metric-value amber">2.2</div>
<div class="metric-label">Avg Turns</div>
</div>
</div>

<h2>Comparative Analysis</h2>
<h3>Why the winner wins</h3>
<ul>
<li>Achieves <strong>100% pass rate</strong> at <strong>~18% lower total cost</strong> than the alternative while handling the same scenarios.</li>
<li>Correctly <strong>initiates balance lookup tools without asking permission</strong>, satisfying tests that require immediate tool usage.</li>
<li>Uses fewer tokens overall, indicating more direct task execution rather than extended preambles.</li>
</ul>
<h3>Notable patterns</h3>
<ul>
<li>Adding the financial skill increased verbosity and introduced <strong>permission-seeking behavior</strong> (‚Äúdo you want general guidance, or do you want me to look up your balances‚Äù) that delayed or prevented tool calls.</li>
<li>The baseline agent implicitly followed the expected flow: retrieve balances first, then reason about allocation.</li>
<li>The skill content helped with qualitative advice (emergency fund, prioritization) but conflicted with tests that expect <strong>action-first behavior</strong>.</li>
</ul>
<h3>Alternatives</h3>
<ul>
<li><strong>with-financial-skill</strong>: Close in cost but failed allocation advice due to not calling tools. The root cause is not missing knowledge, but a <strong>prompt/skill interaction that encourages asking clarifying questions before acting</strong>.</li>
</ul>
<h2>‚ùå Failure Analysis</h2>
<h3>Failure Summary</h3>
<p><strong>with-financial-skill</strong> (1 failure)</p>
<table>
<thead>
<tr>
<th>Test</th>
<th>Root Cause</th>
<th>Fix</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ask for allocation advice ‚Äî skilled agent should apply 50/30/20 rule</td>
<td>Permission-seeking response prevented required tool call</td>
<td>Instruct agent to fetch balances immediately when allocation is requested</td>
</tr>
</tbody>
</table>
<h3>Ask for allocation advice ‚Äî skilled agent should apply 50/30/20 rule (with-financial-skill)</h3>
<ul>
<li><strong>Problem:</strong> The agent provided high-level guidance and asked for confirmation instead of retrieving balances.</li>
<li><strong>Root Cause:</strong> The agent never called <code>get_all_balances</code> or <code>get_balance</code>, violating the test‚Äôs expectation of tool usage.</li>
<li><strong>Behavioral Mechanism:</strong> The skill and system context emphasize phrases like ‚Äúto give specific transfers I‚Äôll need a little info‚Äù and ‚ÄúQuick question first,‚Äù which primes the model into a cautious, consultative mode. This shifts behavior from acting to <strong>seeking user permission</strong>, even when sufficient context exists to proceed.</li>
<li><strong>Fix:</strong> Add an explicit instruction to the system prompt or skill:<blockquote>
<p>‚ÄúWhen a user asks how to allocate money across accounts, immediately retrieve current balances using the appropriate account tools before asking any clarifying questions.‚Äù</p>
</blockquote>
</li>
</ul>
<h2>üîß MCP Tool Feedback</h2>
<h3>accounts_server</h3>
<p>Overall, tools are simple and discoverable. Failures were not due to tool design but to agent hesitation.</p>
<table>
<thead>
<tr>
<th>Tool</th>
<th>Status</th>
<th>Calls</th>
<th>Issues</th>
</tr>
</thead>
<tbody>
<tr>
<td>get_all_balances</td>
<td>‚úÖ</td>
<td>1</td>
<td>Working well</td>
</tr>
<tr>
<td>get_balance</td>
<td>‚úÖ</td>
<td>0</td>
<td>Not used; no test required it explicitly</td>
</tr>
</tbody>
</table>
<h2>üìù System Prompt Feedback</h2>
<h3>baseline (effective)</h3>
<ul>
<li><strong>Token count:</strong> Low</li>
<li><strong>Behavioral impact:</strong> Encourages direct action and tool usage without excessive framing.</li>
<li><strong>Problem:</strong> None observed.</li>
<li><strong>Suggested change:</strong> None.</li>
</ul>
<h3>with-financial-skill prompt (mixed ‚Äî ineffective with gpt-5-mini in allocation task)</h3>
<ul>
<li><strong>Token count:</strong> Higher due to skill injection</li>
<li><strong>Behavioral impact:</strong> Language around ‚Äúguidance,‚Äù ‚Äúpriorities,‚Äù and ‚Äúquick questions‚Äù encourages explanation before execution.</li>
<li><strong>Problem:</strong> Lacks a clear directive on <strong>when to act vs. ask</strong>.</li>
<li><strong>Suggested change:</strong> Append:<blockquote>
<p>‚ÄúDefault to action: if the user asks for advice that depends on account data, call the relevant tools immediately and explain after.‚Äù</p>
</blockquote>
</li>
</ul>
<h2>üìö Skill Feedback</h2>
<h3>financial-skill (mixed)</h3>
<ul>
<li><strong>Usage rate:</strong> High in advisory responses</li>
<li><strong>Token cost:</strong> Moderate</li>
<li><strong>Problem:</strong> Overemphasizes planning and prioritization, which can override test expectations for immediate tool calls.</li>
<li><strong>Suggested change:</strong> Split skill into two sections:</li>
<li>‚ÄúAction rules‚Äù (tool-first behaviors)</li>
<li>‚ÄúAdvisory principles‚Äù (50/30/20, emergency fund guidance)</li>
</ul>
<h2>üí° Optimizations</h2>
<table>
<thead>
<tr>
<th>#</th>
<th>Optimization</th>
<th>Priority</th>
<th>Estimated Savings</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Enforce tool-first rule for allocation queries</td>
<td>recommended</td>
<td>Avoid 100% of similar failures</td>
</tr>
<tr>
<td>2</td>
<td>Trim advisory preambles in skilled agent</td>
<td>suggestion</td>
<td>~10% cost reduction</td>
</tr>
</tbody>
</table>
<h4>1. Enforce tool-first rule for allocation queries (recommended)</h4>
<ul>
<li>Current: Skilled agent asks clarifying questions before fetching balances.</li>
<li>Change: Add an explicit system/skill rule to always fetch balances first.</li>
<li>Impact: Prevents test failures; reduces retries and wasted turns.</li>
</ul>
<h4>2. Trim advisory preambles in skilled agent (suggestion)</h4>
<ul>
<li>Current: Long high-level explanations precede any action.</li>
<li>Change: Move explanations after tool results.</li>
<li>Impact: ~10% cost reduction through fewer tokens and turns.</li>
</ul></div></div></div></section><section class="mb-8"><h2 class="section-title">üèÜ Agent Leaderboard</h2><div class="card overflow-hidden"><table class="leaderboard-table"><thead><tr><th class="w-10"></th><th>Agent</th><th class="text-center">Tests</th><th class="text-center">Pass Rate</th><th class="text-right">Tokens</th><th class="text-right">Cost</th><th class="text-right">Duration</th></tr></thead><tbody><tr class="winner-row"><td class="text-center text-xl">ü•á</td><td><div class="font-medium text-text-light"><span>baseline</span></div></td><td class="text-center tabular-nums"><span class="text-green-400">2</span>/<span class="text-text-muted">2</span></td><td class="text-center"><span class="text-green-400 font-semibold tabular-nums">100%</span></td><td class="text-right tabular-nums text-text-muted">3,455</td><td class="text-right tabular-nums text-text-muted">$0.004625</td><td class="text-right tabular-nums text-text-muted">37.7s</td></tr><tr><td class="text-center text-xl">ü•à</td><td><div class="font-medium text-text-light"><span>with-financial-skill</span></div></td><td class="text-center tabular-nums"><span class="text-green-400">1</span>/<span class="text-text-muted">2</span></td><td class="text-center"><span class="text-red-400 font-semibold tabular-nums">50%</span></td><td class="text-right tabular-nums text-text-muted">3,975</td><td class="text-right tabular-nums text-text-muted">$0.005622</td><td class="text-right tabular-nums text-text-muted">34.4s</td></tr></tbody></table></div></section><section class="mb-8"><h2 class="section-title">üìã Test Results</h2><div class="mb-4 flex items-center justify-between"><div class="flex gap-2"><button class="filter-btn active" data-filter="all" onclick="filterTests(&#39;all&#39;)">All</button><button class="filter-btn " data-filter="diff" onclick="filterTests(&#39;diff&#39;)">Differences ‚ö°</button><button class="filter-btn " data-filter="failed" onclick="filterTests(&#39;failed&#39;)">Failed ‚ùå</button></div><div class="text-sm text-text-muted"><span id="visible-count">4</span> / 4 tests</div></div><div class="space-y-4" id="test-groups"><div class="card overflow-hidden test-group" data-group-type="standalone"><div class="group-header px-5 py-3 bg-surface-elevated border-b border-white/10 flex justify-between items-center cursor-pointer" onclick="toggleGroup(this.parentElement)"><div class="flex items-center gap-3"><span class="text-lg">üìã</span><span class="font-medium text-text-light">tests/fixtures/scenario_07_skill_improvement.py</span><span class="text-sm text-text-muted">(2 tests)</span></div><div class="flex items-center gap-4"><div class="text-sm text-green-400">2/2</div><div class="text-sm text-red-400">1/2</div><span class="text-text-muted transition-transform duration-200 expand-icon">‚ñº</span></div></div><div class="group-content"><div class="test-row border-b border-white/5" data-test-id="test_fund_allocation_advice" data-has-diff="true" data-has-failed="true"><div class="px-5 py-3 hover:bg-white/[0.02] cursor-pointer transition-colors" onclick="toggleTestDetail(this.parentElement)"><div class="flex items-center justify-between"><div class="flex items-center gap-3 min-w-0 flex-1"><span class="text-green-400">‚úÖ</span><span class="text-text-light truncate">Ask for allocation advice ‚Äî skilled agent should apply 50/30‚Ä¶</span><span class="text-yellow-400" title="Results differ between agents">‚ö°</span></div><div class="flex items-center gap-4 text-sm text-text-muted"><span class="tabular-nums" title="Total tokens across selected agents">Total 4,152 tok</span><span class="text-text-muted">¬∑</span><span class="tabular-nums" title="Total cost across selected agents">Total $0.005563</span><span class="text-text-muted">¬∑</span><span class="tabular-nums" title="Token difference between selected agents (%difference)">Œî +9%</span><span class="text-text-muted">¬∑</span><span class="tabular-nums" title="Duration difference between selected agents (%difference)">Œî +35%</span><span class="text-text-muted">¬∑</span><span class="tabular-nums" title="Cost difference between selected agents (%difference)">Œî +2%</span></div></div><div class="flex gap-4 mt-2 pl-8"><div class="agent-result-item flex items-center gap-2 text-xs " data-agent-id="bcdf19f2-5315-4124-88f3-36677b59a55c"><span class="text-text-muted">baseline:</span><span class="text-green-400">‚úÖ</span><span class="text-text-muted tabular-nums">23.9s</span></div><div class="agent-result-item flex items-center gap-2 text-xs " data-agent-id="51daba5a-035d-48e8-8a71-89d451c61e3e"><span class="text-text-muted">with-financial-skill:</span><span class="text-red-400">‚ùå</span><span class="text-text-muted tabular-nums">17.7s</span></div></div></div><div class="test-detail hidden border-t border-white/10 bg-surface-elevated"><div class="comparison-grid grid gap-4 p-5" style="grid-template-columns: repeat(2, 1fr);"><div class="comparison-column  border-l-[3px] border-green-500" data-agent-id="bcdf19f2-5315-4124-88f3-36677b59a55c"><div class="flex items-center justify-between mb-4"><div class="font-medium text-text-light">baseline</div><span class="px-2 py-0.5 rounded text-xs font-medium bg-green-500/15 text-green-400">passed</span></div><div class="space-y-2 mb-4"><div class="grid grid-cols-4 gap-2 p-3 bg-surface-elevated rounded-material text-center"><div><div class="text-sm font-medium text-text-light tabular-nums">23.87s</div><div class="text-xs text-text-muted">duration</div></div><div><div class="text-sm font-medium text-text-light tabular-nums">3</div><div class="text-xs text-text-muted">turns</div></div><div><div class="text-sm font-medium text-text-light tabular-nums">1</div><div class="text-xs text-text-muted">tools</div></div><div><div class="text-sm font-medium text-text-light tabular-nums">2,169</div><div class="text-xs text-text-muted">tokens</div></div></div><div class="grid grid-cols-4 gap-2 p-3 bg-surface-elevated rounded-material text-center"><div><div class="text-sm font-medium text-text-light tabular-nums">$0.002759</div><div class="text-xs text-text-muted">cost</div></div></div></div><div class="mb-4"><div class="text-sm font-medium text-text-light mb-3 flex items-center gap-2"><span>üìä</span><span>Sequence</span></div><div class="p-3 bg-surface-code rounded-material border border-white/5 cursor-pointer hover:border-primary/30 transition-colors" onclick="event.stopPropagation(); showDiagram(this.dataset.mermaidCode);" data-mermaid-code="sequenceDiagram
    participant User
    participant Agent
    participant Tools

    User-&gt;&gt;Agent: &#34;How should I allocate the money across my accounts?&#34;
    Agent-&gt;&gt;Tools: &#34;get_all_balances({})&#34;
    Tools--&gt;&gt;Agent: &#34;{&#39;accounts&#39;: {&#39;checking&#39;: {&#39;balance&#39;: 1500.0, &#39;formatted&#39;: &#39;&#34;
    Agent-&gt;&gt;User: &#34;Right now you have $4,500 total: $1,500 in checking and $3,000 in savings. How y&#34;"><div class="mermaid text-xs">sequenceDiagram
    participant User
    participant Agent
    participant Tools

    User->>Agent: "How should I allocate the money across my accounts?"
    Agent->>Tools: "get_all_balances({})"
    Tools-->>Agent: "{'accounts': {'checking': {'balance': 1500.0, 'formatted': '"
    Agent->>User: "Right now you have $4,500 total: $1,500 in checking and $3,000 in savings. How y"</div></div></div><div class="mb-4"><div class="text-sm font-medium text-text-light mb-3 flex items-center gap-2"><span>üîß</span><span>Tool Calls</span></div><div class="space-y-1"><div class="flex items-center gap-2 text-sm p-2 rounded bg-green-500/5"><span class="text-green-400">‚úÖ</span><code class="tool-name">get_all_balances</code></div></div></div><div class="mb-4"><div class="text-sm font-medium text-text-light mb-3 flex items-center gap-2"><span>‚úì</span><span>Assertions</span></div><div class="space-y-2"><div class="flex items-center gap-2 text-sm p-2 rounded bg-green-500/5"><span class="text-green-400">‚úÖ</span><code class="text-text-muted">llm</code><span class="text-text">provides financial advice about fund allocation</span></div></div></div><div class="mb-4"><div class="text-sm font-medium text-text-light mb-3 flex items-center gap-2"><span>üí¨</span><span>Response</span></div><div style="padding: 1rem; background-color: var(--color-surface-elevated); border-radius: 0.5rem; color: var(--color-text); white-space: pre-wrap; word-wrap: break-word; line-height: 1.625;">Right now you have $4,500 total: $1,500 in checking and $3,000 in savings. How you should split it depends on your goals and monthly cash flow. A few quick questions that will let me give a specific plan:
- How much are your typical monthly living expenses (rent/mortgage, bills, food, transport)?
- Any upcoming large expenses in the next 6‚Äì12 months (car repair, vacation, tuition, down payment)?
- Do you have high‚Äëinterest debt (credit cards) you‚Äôre paying down?
- Do you feel comfortable with the current cushion in your checking for monthly bills, or do you often overdraft?

Until I hear back, here are general guidelines and three simple allocation options you can pick based on your situation.

Key rules of thumb
- Emergency fund: aim for 3‚Äì6 months of essential expenses in savings. If your income is unstable or you have dependents, aim toward 6 months.
- Checking buffer: keep enough in checking to cover one month of bills plus a small buffer ($500‚Äì$1,000) to avoid overdrafts.
- Short‚Äëterm goals (under 2 years): keep in savings or a dedicated short‚Äëterm account, not in stocks.
- Long‚Äëterm investing: once emergency fund is in place and high‚Äëinterest debt is handled, redirect extra toward investments/retirement.

Example allocations (based on different priorities)
1) Conservative / safety-first
- Goal: build emergency fund
- Keep $1,500 in checking for monthly use
- Move $1,500 from checking into savings so savings = $4,500 (larger emergency cushion)
Result: checking $0‚Äìnot ideal unless you keep buffer; better: keep $1,000 in checking and transfer $500 ‚Üí savings. I recommend leaving at least $500‚Äì$1,000 in checking.

2) Balanced / day-to-day + short-term goals
- Keep $1,500 in checking (covers monthly bills)
- Savings $3,000 remain for short-term goals or emergency top-up
- Automate monthly transfer of a fixed amount into savings (e.g., $300/month)

3) Aggressive savings / building emergency + investing
- Keep $1,000 in checking
- Move $500 from checking ‚Üí savings now (savings = $3,500)
- Any additional monthly surplus split 70% to investments/retirement, 30% to savings until emergency fund target met

Practical next steps I recommend
- Tell me your monthly expenses and goals so I can recommend an exact target emergency fund and a transfer amount.
- If you want, I can move funds between your accounts now (tell me how much and which direction).
- Set up automation: a weekly/biweekly/ monthly transfer into savings right after paydays.
- Consider a separate savings sub-account or high-yield savings for goals to keep money organized and earning more interest.

If you want a specific suggestion now, tell me whether your priority is (A) build emergency fund, (B) save for a short-term goal, (C) pay down debt/invest ‚Äî and I‚Äôll propose one exact transfer (and I can execute it if you‚Äôd like).</div></div></div><div class="comparison-column  border-l-[3px] border-red-500" data-agent-id="51daba5a-035d-48e8-8a71-89d451c61e3e"><div class="flex items-center justify-between mb-4"><div class="font-medium text-text-light">with-financial-skill</div><span class="px-2 py-0.5 rounded text-xs font-medium bg-red-500/15 text-red-400">failed</span></div><div class="space-y-2 mb-4"><div class="grid grid-cols-4 gap-2 p-3 bg-surface-elevated rounded-material text-center"><div><div class="text-sm font-medium text-text-light tabular-nums">17.71s</div><div class="text-xs text-text-muted">duration</div></div><div><div class="text-sm font-medium text-text-light tabular-nums">2</div><div class="text-xs text-text-muted">turns</div></div><div><div class="text-sm font-medium text-text-light tabular-nums">0</div><div class="text-xs text-text-muted">tools</div></div><div><div class="text-sm font-medium text-text-light tabular-nums">1,983</div><div class="text-xs text-text-muted">tokens</div></div></div><div class="grid grid-cols-4 gap-2 p-3 bg-surface-elevated rounded-material text-center"><div><div class="text-sm font-medium text-text-light tabular-nums">$0.002804</div><div class="text-xs text-text-muted">cost</div></div></div></div><div class="mb-4"><div class="text-sm font-medium text-text-light mb-3 flex items-center gap-2"><span>üìä</span><span>Sequence</span></div><div class="p-3 bg-surface-code rounded-material border border-white/5 cursor-pointer hover:border-primary/30 transition-colors" onclick="event.stopPropagation(); showDiagram(this.dataset.mermaidCode);" data-mermaid-code="sequenceDiagram
    participant User
    participant Agent
    participant Tools

    User-&gt;&gt;Agent: &#34;How should I allocate the money across my accounts?&#34;
    Agent-&gt;&gt;User: &#34;I can help ‚Äî to give specific transfers I‚Äôll need a little info. Quick question &#34;"><div class="mermaid text-xs">sequenceDiagram
    participant User
    participant Agent
    participant Tools

    User->>Agent: "How should I allocate the money across my accounts?"
    Agent->>User: "I can help ‚Äî to give specific transfers I‚Äôll need a little info. Quick question "</div></div></div><div class="mb-4"><div class="text-sm font-medium text-text-light mb-3 flex items-center gap-2"><span>üí¨</span><span>Response</span></div><div style="padding: 1rem; background-color: var(--color-surface-elevated); border-radius: 0.5rem; color: var(--color-text); white-space: pre-wrap; word-wrap: break-word; line-height: 1.625;">I can help ‚Äî to give specific transfers I‚Äôll need a little info. Quick question first: do you want general guidance, or do you want me to look up your current balances and suggest exact transfers now?

Below is a short, practical plan you can use right away plus what I‚Äôll do if you want me to check your accounts.

High-level rules (my priorities)
- Emergency fund first: build 3‚Äì6 months of essential expenses in savings before other big goals.
- Follow 50/30/20 as a baseline: 50% needs, 30% wants, 20% savings/debt repayment.
- Pay yourself first: automate savings and debt payments as soon as pay arrives.
- Avoid lifestyle creep: keep increases in spending tied to savings/investment goals.

Recommended account allocation (general)
- Checking: Enough to cover 1‚Äì2 months of regular bills and upcoming spending (rent/mortgage, utilities, loan payments, groceries). This is your operating account.
- Savings (high-yield if possible): Emergency fund (3‚Äì6 months of essential expenses) + short-term sinking funds (vacation, car maintenance, big purchases). Once emergency fund target is hit, use savings for short-term goals or if you prefer, keep some in dedicated sub-accounts.
- Retirement accounts (401(k), IRA): Contribute at least enough to get full employer match. Then aim to get to 10‚Äì20% of gross income toward retirement (after employer match).
- Brokerage or other investment accounts: For long-term non-retirement goals once emergency savings and retirement match are covered.
- Extra cash to pay down debt: If you have high‚Äëinterest debt (credit cards, payday loans), direct additional savings to pay that down before extra investing.

Practical monthly allocation (based on take-home pay)
- Needs (50%) ‚Äî keep in/check from checking to pay bills
- Wants (30%) ‚Äî discretionary spending from checking
- Savings &amp; debt (20%) ‚Äî split this automatically: 
  - First, to savings until emergency fund reaches 3‚Äì6 months
  - Next, extra to high‚Äëinterest debt, then retirement/brokerage

Where to keep each dollar
- Emergency fund: savings account (high-yield) ‚Äî goal: 3‚Äì6 months of essentials
- Monthly buffer: checking ‚Äî 1‚Äì2 months of expenses
- Retirement contributions: payroll 401(k) pre-tax or Roth IRA ‚Äî automated each paycheck
- Short-term goals: savings sub-accounts or labeled buckets
- Long-term investing: brokerage account or additional retirement contributions after debt/EF/retirement match

Example (if your take-home is $4,000/month)
- Needs: $2,000 (keeping $2,000 in checking for monthly bills)
- Wants: $1,200 (spending from checking)
- Savings/Debt: $800 ‚Äî automate $500 ‚Üí savings until EF complete, $300 ‚Üí extra debt payment or IRA

Next steps I can do for you (pick one)
1) If you want tailored suggestions, tell me:
   - monthly take-home pay
   - monthly essential expenses (rent/mortgage, utilities, insurance, minimum debt payments, groceries)
   - current checking &amp; savings balances
   - any high-interest debt amounts &amp; interest rates
   - retirement contributions/employer match
2) I can fetch your current balances now and make recommended transfers ‚Äî tell me which accounts (checking/savings) I may access and whether you want me to execute transfers automatically or just show a plan.

Which would you like me to do?</div></div><div><div class="text-sm font-medium text-red-400 mb-3 flex items-center gap-2"><span>‚ùå</span><span>Error</span></div><div style="padding: 0.75rem; background-color: rgb(127, 29, 29); border: 1px solid rgb(153, 27, 27); border-radius: 0.5rem; color: rgb(254, 202, 202); font-size: 0.875rem; white-space: pre-wrap; word-wrap: break-word; max-height: 200px; overflow-y: auto;">      AssertionError: assert (False or False)
       +  where False = tool_was_called(&#39;get_all_balances&#39;)
       +    where tool_was_called = AgentResult(SUCCESS)\n  Turns: 2\n  Tools called: none\n  Duration: 11112ms\n  Tokens: 1983 | Cost: $0.002804\n  Final: &#39;I can help ‚Äî to give specific transfers I‚Äôll need a little info. Quick question first: do you want g&#39;....tool_was_called
       +  and   False = tool_was_called(&#39;get_balance&#39;)
       +    where tool_was_called = AgentResult(SUCCESS)\n  T

... (error truncated, see full logs for details)</div></div></div></div></div></div><div class="test-row border-b border-white/5" data-test-id="test_savings_recommendation" data-has-diff="false" data-has-failed="false"><div class="px-5 py-3 hover:bg-white/[0.02] cursor-pointer transition-colors" onclick="toggleTestDetail(this.parentElement)"><div class="flex items-center justify-between"><div class="flex items-center gap-3 min-w-0 flex-1"><span class="text-green-400">‚úÖ</span><span class="text-text-light truncate">Ask about savings ‚Äî skilled agent should mention emergency f‚Ä¶</span></div><div class="flex items-center gap-4 text-sm text-text-muted"><span class="tabular-nums" title="Total tokens across selected agents">Total 3,278 tok</span><span class="text-text-muted">¬∑</span><span class="tabular-nums" title="Total cost across selected agents">Total $0.004684</span><span class="text-text-muted">¬∑</span><span class="tabular-nums" title="Token difference between selected agents (%difference)">Œî +55%</span><span class="text-text-muted">¬∑</span><span class="tabular-nums" title="Duration difference between selected agents (%difference)">Œî +20%</span><span class="text-text-muted">¬∑</span><span class="tabular-nums" title="Cost difference between selected agents (%difference)">Œî +51%</span></div></div><div class="flex gap-4 mt-2 pl-8"><div class="agent-result-item flex items-center gap-2 text-xs " data-agent-id="bcdf19f2-5315-4124-88f3-36677b59a55c"><span class="text-text-muted">baseline:</span><span class="text-green-400">‚úÖ</span><span class="text-text-muted tabular-nums">13.8s</span></div><div class="agent-result-item flex items-center gap-2 text-xs " data-agent-id="51daba5a-035d-48e8-8a71-89d451c61e3e"><span class="text-text-muted">with-financial-skill:</span><span class="text-green-400">‚úÖ</span><span class="text-text-muted tabular-nums">16.7s</span></div></div></div><div class="test-detail hidden border-t border-white/10 bg-surface-elevated"><div class="comparison-grid grid gap-4 p-5" style="grid-template-columns: repeat(2, 1fr);"><div class="comparison-column  border-l-[3px] border-green-500" data-agent-id="bcdf19f2-5315-4124-88f3-36677b59a55c"><div class="flex items-center justify-between mb-4"><div class="font-medium text-text-light">baseline</div><span class="px-2 py-0.5 rounded text-xs font-medium bg-green-500/15 text-green-400">passed</span></div><div class="space-y-2 mb-4"><div class="grid grid-cols-4 gap-2 p-3 bg-surface-elevated rounded-material text-center"><div><div class="text-sm font-medium text-text-light tabular-nums">13.83s</div><div class="text-xs text-text-muted">duration</div></div><div><div class="text-sm font-medium text-text-light tabular-nums">2</div><div class="text-xs text-text-muted">turns</div></div><div><div class="text-sm font-medium text-text-light tabular-nums">0</div><div class="text-xs text-text-muted">tools</div></div><div><div class="text-sm font-medium text-text-light tabular-nums">1,286</div><div class="text-xs text-text-muted">tokens</div></div></div><div class="grid grid-cols-4 gap-2 p-3 bg-surface-elevated rounded-material text-center"><div><div class="text-sm font-medium text-text-light tabular-nums">$0.001865</div><div class="text-xs text-text-muted">cost</div></div></div></div><div class="mb-4"><div class="text-sm font-medium text-text-light mb-3 flex items-center gap-2"><span>üìä</span><span>Sequence</span></div><div class="p-3 bg-surface-code rounded-material border border-white/5 cursor-pointer hover:border-primary/30 transition-colors" onclick="event.stopPropagation(); showDiagram(this.dataset.mermaidCode);" data-mermaid-code="sequenceDiagram
    participant User
    participant Agent
    participant Tools

    User-&gt;&gt;Agent: &#34;I want to save more money. What do you recommend?&#34;
    Agent-&gt;&gt;User: &#34;Great ‚Äî here are practical, high-impact ways to save more, plus a couple quick o&#34;"><div class="mermaid text-xs">sequenceDiagram
    participant User
    participant Agent
    participant Tools

    User->>Agent: "I want to save more money. What do you recommend?"
    Agent->>User: "Great ‚Äî here are practical, high-impact ways to save more, plus a couple quick o"</div></div></div><div class="mb-4"><div class="text-sm font-medium text-text-light mb-3 flex items-center gap-2"><span>‚úì</span><span>Assertions</span></div><div class="space-y-2"><div class="flex items-center gap-2 text-sm p-2 rounded bg-green-500/5"><span class="text-green-400">‚úÖ</span><code class="text-text-muted">llm</code><span class="text-text">provides savings recommendations</span></div></div></div><div class="mb-4"><div class="text-sm font-medium text-text-light mb-3 flex items-center gap-2"><span>üí¨</span><span>Response</span></div><div style="padding: 1rem; background-color: var(--color-surface-elevated); border-radius: 0.5rem; color: var(--color-text); white-space: pre-wrap; word-wrap: break-word; line-height: 1.625;">Great ‚Äî here are practical, high-impact ways to save more, plus a couple quick options I can help with right away.

High-level principles
- Automate it: set up automatic transfers to savings right after payday so you ‚Äúpay yourself first.‚Äù
- Make goals specific: name the goal, amount, and date (e.g., $3,600 in 12 months = $300/month).
- Reduce friction: simplify accounts and automate categorization so saving feels effortless.

Concrete steps you can start today
1. Set a clear goal
   - Emergency fund (3‚Äì6 months of expenses), short-term (vacation, car), and long-term (down payment).
2. Automate transfers
   - Move a fixed amount to savings each payday. Even $50‚Äì$200 adds up fast.
3. Use a high-yield savings account
   - Earn more interest than a standard checking account.
4. Follow a budgeting rule
   - 50/30/20 (needs/wants/savings &amp; debt) or zero-based budgeting if you want tighter control.
5. Attack high-interest debt first
   - Paying down credit cards gives a guaranteed return equal to the interest rate.
6. Trim recurring costs
   - Audit subscriptions, renegotiate bills (internet, phone, insurance), and cancel unused services.
7. Reduce everyday spending
   - Meal plan, batch errands to save fuel, buy generic brands, set a weekly grocery limit.
8. Round-ups and ‚Äúsinking funds‚Äù
   - Use apps or your bank‚Äôs round-up feature to transfer small amounts automatically. Create sub-accounts for planned expenses.
9. Boost income and windfalls
   - Sell unwanted items, pick up side work, and direct bonuses/tax refunds into savings instead of spending.
10. Track and review monthly
   - Check progress, reallocate excess funds, and increase your transfer when feasible.

Small strategies that scale
- Start small and increase: save $25/week and raise by $5 each month.
- Save raises/bonuses first (not lifestyle creep).
- Keep savings liquid for the emergency fund, then move longer-term goals into investments/retirement accounts.

Would you like help putting a plan into numbers?
- I can check your current balances and recent transactions, suggest a monthly transfer amount based on them, or set up an automatic transfer for you. Tell me which you&#39;d like to do.</div></div></div><div class="comparison-column  border-l-[3px] border-green-500" data-agent-id="51daba5a-035d-48e8-8a71-89d451c61e3e"><div class="flex items-center justify-between mb-4"><div class="font-medium text-text-light">with-financial-skill</div><span class="px-2 py-0.5 rounded text-xs font-medium bg-green-500/15 text-green-400">passed</span></div><div class="space-y-2 mb-4"><div class="grid grid-cols-4 gap-2 p-3 bg-surface-elevated rounded-material text-center"><div><div class="text-sm font-medium text-text-light tabular-nums">16.67s</div><div class="text-xs text-text-muted">duration</div></div><div><div class="text-sm font-medium text-text-light tabular-nums">2</div><div class="text-xs text-text-muted">turns</div></div><div><div class="text-sm font-medium text-text-light tabular-nums">0</div><div class="text-xs text-text-muted">tools</div></div><div><div class="text-sm font-medium text-text-light tabular-nums">1,992</div><div class="text-xs text-text-muted">tokens</div></div></div><div class="grid grid-cols-4 gap-2 p-3 bg-surface-elevated rounded-material text-center"><div><div class="text-sm font-medium text-text-light tabular-nums">$0.002818</div><div class="text-xs text-text-muted">cost</div></div></div></div><div class="mb-4"><div class="text-sm font-medium text-text-light mb-3 flex items-center gap-2"><span>üìä</span><span>Sequence</span></div><div class="p-3 bg-surface-code rounded-material border border-white/5 cursor-pointer hover:border-primary/30 transition-colors" onclick="event.stopPropagation(); showDiagram(this.dataset.mermaidCode);" data-mermaid-code="sequenceDiagram
    participant User
    participant Agent
    participant Tools

    User-&gt;&gt;Agent: &#34;I want to save more money. What do you recommend?&#34;
    Agent-&gt;&gt;User: &#34;Great ‚Äî want practical, doable steps. Here‚Äôs a short, actionable plan you can st&#34;"><div class="mermaid text-xs">sequenceDiagram
    participant User
    participant Agent
    participant Tools

    User->>Agent: "I want to save more money. What do you recommend?"
    Agent->>User: "Great ‚Äî want practical, doable steps. Here‚Äôs a short, actionable plan you can st"</div></div></div><div class="mb-4"><div class="text-sm font-medium text-text-light mb-3 flex items-center gap-2"><span>‚úì</span><span>Assertions</span></div><div class="space-y-2"><div class="flex items-center gap-2 text-sm p-2 rounded bg-green-500/5"><span class="text-green-400">‚úÖ</span><code class="text-text-muted">llm</code><span class="text-text">provides savings recommendations</span></div></div></div><div class="mb-4"><div class="text-sm font-medium text-text-light mb-3 flex items-center gap-2"><span>üí¨</span><span>Response</span></div><div style="padding: 1rem; background-color: var(--color-surface-elevated); border-radius: 0.5rem; color: var(--color-text); white-space: pre-wrap; word-wrap: break-word; line-height: 1.625;">Great ‚Äî want practical, doable steps. Here‚Äôs a short, actionable plan you can start today plus specific tactics to speed up saving.

Top priorities (in order)
1. Build an emergency fund equal to 3‚Äì6 months of your essential monthly expenses. This comes first.
2. After your emergency fund, pay down any high‚Äëinterest debt (credit cards, payday, some personal loans).
3. Make sure you‚Äôre getting any employer retirement match (this is ‚Äúfree money‚Äù).
4. Then save for other goals (house, vacation) and invest for long‚Äëterm growth.

Simple monthly framework (50/30/20)
- Needs (50%): housing, utilities, groceries, insurance, minimum debt payments.
- Wants (30%): dining out, entertainment, shopping.
- Savings/debt repayment (20%): emergency fund, extra debt payments, retirement.

Actionable steps (do these first)
1. Calculate your essentials: total your true monthly needs (rent/mortgage, groceries, utilities, insurance, minimum debt). Multiply by 3‚Äì6 to get your emergency fund goal.
2. Automate ‚Äúpay yourself first‚Äù: set a recurring transfer the day you get paid from checking ‚Üí high‚Äëyield savings for your emergency fund.
3. Open a high‚Äëyield savings account or separate ‚Äúpot‚Äù to keep EF liquid and distinct from spending.
4. Trim easy expenses: cancel unused subscriptions, cut back dining out by 1‚Äì2 meals/week, shop groceries with a list and a plan, swap to a cheaper phone/data plan.
5. Revisit large items: If housing &gt;30% or transportation &gt;15%, consider downsizing, refinancing, carpooling, or using public transit where possible.
6. Attack high‚Äëinterest debt after EF: use avalanche (highest interest first) to save interest, or snowball (small wins) if you need motivation.
7. Contribute to retirement up to employer match as soon as your EF is established.
8. Track and review monthly: set one monthly 20‚Äì30 minute budgeting check to adjust.

Ways to increase the amount you can save
- Increase income: side gig, freelancing, overtime, sell unused items.
- Reduce housing/transportation costs (biggest levers).
- Temporarily cut wants (entertainment, subscriptions) and redirect that money to savings.
- Refinance high‚Äëinterest loans if you qualify.

Tools and KPIs to watch
- Savings rate (aim ‚â•20% of take‚Äëhome pay).
- Emergency fund months funded.
- Net worth trend.
- Credit utilization (&lt;30% recommended).
- Monthly budget adherence (use an app or spreadsheet).

Red flags to avoid
- Spending more than you earn.
- No emergency fund.
- Credit cards near their limits.
- Putting entertainment or dining above savings.

Quick example
If your take‚Äëhome pay is $4,000/month and your essentials are $2,200:
- Emergency fund target (3 months) = $6,600.
- Automate $800/month to savings (20%): you‚Äôll hit 3 months in ~8‚Äì9 months.
- Temporarily cut $200/month in dining/entertainment and add to savings to reach goal faster.

Would you like help with any of the following?
- I can create a simple budget template for you.
- I can review your accounts and recent transactions to give tailored recommendations (I‚Äôll need your permission to fetch balances/transactions).
- Or tell me your monthly take‚Äëhome pay and rough monthly expenses and I‚Äôll make a 3‚Äì6 month plan with numbers.

Which would you like to do next?</div></div></div></div></div></div></div></div></div><style>
.test-group.collapsed .group-content {
    display: none;
}
.test-group.collapsed .expand-icon {
    transform: rotate(-90deg);
}
.test-row.hidden {
    display: none;
}
.test-detail.hidden {
    display: none;
}
</style></section></div><div id="overlay" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden items-center justify-center p-8" onclick="hideOverlay()"><button class="absolute top-4 right-4 w-10 h-10 flex items-center justify-center text-2xl text-text-muted hover:text-text-light bg-surface-card rounded-full border border-white/10 transition-colors" onclick="hideOverlay()">‚úï</button><div class="w-[90vw] h-[85vh] overflow-auto bg-surface-card rounded-lg p-6 shadow-material-lg flex items-center justify-center" onclick="event.stopPropagation()"><div class="mermaid w-full h-full" id="overlay-mermaid"></div></div></div><div id="diagram-hover-popup" class="fixed z-40 bg-surface-card rounded-lg shadow-material-lg border border-white/10 p-4 hidden max-w-xl" onmouseenter="keepDiagramHover()" onmouseleave="hideDiagramHover()" onclick="hideOverlay(); this.classList.add(&#39;hidden&#39;); showDiagram(document.getElementById(&#39;hover-mermaid&#39;).innerHTML);"><div class="mermaid" id="hover-mermaid"></div></div><style>
#overlay.active { display: flex !important; }
#diagram-hover-popup.active { display: block !important; }

/* Scale the mermaid SVG in overlay to fill available space */
#overlay-mermaid svg {
    max-width: 100%;
    max-height: 100%;
    width: auto;
    height: auto;
    min-height: 60vh;
}
</style><script>
// pytest-aitest Report Scripts

// Initialize Mermaid with dark theme
mermaid.initialize({ 
    startOnLoad: true,
    theme: 'dark',
    securityLevel: 'loose',
    themeVariables: {
        primaryColor: '#4051b5',
        primaryTextColor: '#c9d1d9',
        primaryBorderColor: '#4051b5',
        lineColor: '#8b949e',
        secondaryColor: '#282c34',
        tertiaryColor: '#1e2129',
        background: '#282c34',
        mainBkg: '#282c34',
        noteBkgColor: '#2d333b',
        noteTextColor: '#c9d1d9',
        actorTextColor: '#c9d1d9',
        actorBkg: '#2d323c',
        actorBorder: '#4051b5',
        signalColor: '#c9d1d9',
        signalTextColor: '#c9d1d9',
    }
});

// Copy to clipboard for suggestions
function copyToClipboard(button, text) {
    navigator.clipboard.writeText(text).then(() => {
        const originalText = button.textContent;
        button.textContent = '‚úì Copied!';
        button.classList.add('copied');
        setTimeout(() => {
            button.textContent = originalText;
            button.classList.remove('copied');
        }, 2000);
    }).catch(err => {
        console.error('Failed to copy:', err);
        button.textContent = '‚ùå Error';
        setTimeout(() => {
            button.textContent = 'üìã Copy';
        }, 2000);
    });
}

// Fullscreen diagram viewer
function showDiagram(mermaidCode) {
    const overlay = document.getElementById('overlay');
    const content = document.getElementById('overlay-mermaid');
    
    // Set the raw mermaid code as text content (not innerHTML to avoid escaping issues)
    content.textContent = mermaidCode;
    
    // Remove any previous rendering attributes
    content.removeAttribute('data-processed');
    
    overlay.classList.add('active');
    
    // Run mermaid on this element
    mermaid.run({ nodes: [content] }).catch(err => {
        console.error('Mermaid render error:', err);
        // Show the raw code if rendering fails
        content.textContent = 'Error rendering diagram:\n' + mermaidCode;
    });
}

function hideOverlay() {
    document.getElementById('overlay').classList.remove('active');
}

// Close overlay on Escape key
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') hideOverlay();
});

// Hover popup for side-by-side diagrams
let hoverTimeout = null;
function showDiagramHover(element, mermaidCode) {
    clearTimeout(hoverTimeout);
    const popup = document.getElementById('diagram-hover-popup');
    const content = document.getElementById('hover-mermaid');
    content.innerHTML = mermaidCode;
    popup.classList.add('active');
    mermaid.run({ nodes: [content] });
}

function hideDiagramHover() {
    hoverTimeout = setTimeout(() => {
        document.getElementById('diagram-hover-popup').classList.remove('active');
    }, 100);
}

function keepDiagramHover() {
    clearTimeout(hoverTimeout);
}

// Side-by-side test selector
function showSideBySideTest(testId) {
    // Hide all groups
    document.querySelectorAll('.side-by-side-group').forEach(group => {
        group.classList.remove('active');
    });
    // Show selected group
    const selected = document.getElementById(testId);
    if (selected) {
        selected.classList.add('active');
        // Re-render mermaid diagrams in the newly visible group
        mermaid.run({ nodes: selected.querySelectorAll('.mermaid') });
    }
}


// All agent data for client-side filtering
const allAgents = [{"id": "bcdf19f2-5315-4124-88f3-36677b59a55c", "name": "baseline", "pass_rate": 100.0}, {"id": "51daba5a-035d-48e8-8a71-89d451c61e3e", "name": "with-financial-skill", "pass_rate": 50.0}];
const allAgentsById = {"bcdf19f2-5315-4124-88f3-36677b59a55c": {"id": "bcdf19f2-5315-4124-88f3-36677b59a55c", "name": "baseline"}, "51daba5a-035d-48e8-8a71-89d451c61e3e": {"id": "51daba5a-035d-48e8-8a71-89d451c61e3e", "name": "with-financial-skill"}};

// Track selected agents (exactly 2)
let selectedAgentIds = ["bcdf19f2-5315-4124-88f3-36677b59a55c", "51daba5a-035d-48e8-8a71-89d451c61e3e"];

// Agent comparison logic - always keep exactly 2 selected
function updateAgentComparison(clickedAgentId) {
    const checkboxes = document.querySelectorAll('input[name="compare-agent"]');
    
    // If clicking an already-selected agent, do nothing (keep 2 selected)
    if (selectedAgentIds.includes(clickedAgentId)) {
        // Re-check it to prevent unchecking
        checkboxes.forEach(cb => {
            if (cb.value === clickedAgentId) {
                cb.checked = true;
            }
        });
        return;
    }
    
    // Replace the oldest selection with the new one
    selectedAgentIds.shift();  // Remove first (oldest)
    selectedAgentIds.push(clickedAgentId);  // Add new one
    
    // Update all checkboxes to match selectedAgentIds
    checkboxes.forEach(cb => {
        cb.checked = selectedAgentIds.includes(cb.value);
        cb.closest('.agent-chip').classList.toggle('selected', cb.checked);
    });
    
    // Update visible columns in test comparison
    document.querySelectorAll('.comparison-column').forEach(col => {
        const agentId = col.dataset.agentId;
        if (agentId) {
            const shouldShow = selectedAgentIds.includes(agentId);
            col.classList.toggle('hidden', !shouldShow);
            
            // Render mermaid diagrams in newly visible columns
            if (shouldShow) {
                const diagrams = col.querySelectorAll('.mermaid:not([data-processed])');
                if (diagrams.length > 0) {
                    mermaid.run({ nodes: diagrams });
                }
            }
        }
    });
    
    // Update comparison grid layout based on visible columns
    document.querySelectorAll('.comparison-grid').forEach(grid => {
        const visibleCols = grid.querySelectorAll('.comparison-column:not(.hidden)').length;
        grid.style.gridTemplateColumns = `repeat(${visibleCols}, 1fr)`;
    });
    
    // Update agent cards visibility
    document.querySelectorAll('.agent-card[data-card-id]').forEach(card => {
        const agentId = card.dataset.cardId;
        card.classList.toggle('hidden', !selectedAgentIds.includes(agentId));
    });
    
    // Update comparison row agent results
    document.querySelectorAll('.agent-result-item').forEach(item => {
        const agentId = item.dataset.agentId;
        item.classList.toggle('hidden', !selectedAgentIds.includes(agentId));
    });
    
    console.log('Selected agents:', selectedAgentIds);
}

// Test filtering
function filterTests(filter) {
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.filter === filter);
    });
    
    let visibleCount = 0;
    document.querySelectorAll('.test-row').forEach(row => {
        let show = true;
        if (filter === 'diff') {
            show = row.dataset.hasDiff === 'true';
        } else if (filter === 'failed') {
            show = row.dataset.hasFailed === 'true';
        }
        row.classList.toggle('hidden', !show);
        if (show) visibleCount++;
    });
    
    document.getElementById('visible-count').textContent = visibleCount;
}

// Group toggle
function toggleGroup(group) {
    group.classList.toggle('collapsed');
}

// Test detail toggle - also renders mermaid diagrams when expanded
function toggleTestDetail(row) {
    const detail = row.querySelector('.test-detail');
    const wasHidden = detail.classList.contains('hidden');
    detail.classList.toggle('hidden');
    
    // If we're showing the detail, render any mermaid diagrams
    if (wasHidden) {
        const diagrams = detail.querySelectorAll('.mermaid:not([data-processed])');
        if (diagrams.length > 0) {
            mermaid.run({ nodes: diagrams });
        }
    }
}

// Initialize on page load - process visible mermaid diagrams
document.addEventListener('DOMContentLoaded', () => {
    // Mermaid should auto-process with startOnLoad, but just in case
    const visibleDiagrams = document.querySelectorAll('.mermaid:not(.hidden .mermaid)');
    if (visibleDiagrams.length > 0) {
        mermaid.run({ nodes: visibleDiagrams });
    }
});
</script></body></html>